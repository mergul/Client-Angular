<div class="container vh-100">
    <div class="d-flex flex-column align-items-center">
        <!-- <canvas #soundCanvas class="visualizer" height="60px" width="1000px"></canvas> -->
        <div style="display: flex; justify-content: space-evenly; width: 100%; margin-top: 15px;">
            <mat-form-field class="my-options">
                <mat-select placeholder="Select your language"
                            [(ngModel)]="currentLanguage" [disabled]="recognizing">
                  <mat-option *ngFor="let language of languages" [value]="language" (click)="onSelectLanguage(language)">
                    {{language}}
                  </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field  class="my-options">
                <mat-select placeholder="Select target language"
                            [(ngModel)]="targetLanguage" [disabled]="recognizing">
                  <mat-option *ngFor="let language of languages" [value]="language" (click)="onSelectTargetLanguage(language)">
                    {{language}}
                  </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="my-options">
                <mat-label>Favorite food</mat-label>
                <mat-select [formControl]="animalControl" (selectionChange)="onBookChange($event)" required>
                    <mat-option *ngFor="let food of foods | async" [value]="food">
                        {{food.deviceId}}
                    </mat-option>
                </mat-select>
                <mat-hint>{{animalControl.value?.deviceId}}</mat-hint>
            </mat-form-field>
        </div>
        <div class="p-1">
            <video #localVideo playsinline autoplay muted controls></video>
            <video #remoteVideo1 playsinline autoplay controls></video>
            <video #remoteVideo2 playsinline autoplay controls></video>
        </div>
        <div class="p-2" style="padding-top: 20px;">
            <video #remoteVideo3 playsinline autoplay controls></video>
            <video #remoteVideo4 playsinline autoplay controls></video>
            <video #remoteVideo5 playsinline autoplay controls></video>
        </div>
        <div style="width: 90%; padding: 20px; display: flex; flex-direction: row;justify-content: space-evenly"> 
            <div style="align-items: flex-start; padding-top: 15px;">
                <button #startButton [disabled]="startButtonDisabled" (click)="startCamera()">Start Webcam</button>
            </div>
            <div>
                <form>
                    <mat-form-field class="speech-result-width">
                        <mat-label>Speech Input Result</mat-label>
                      <textarea #speechTextBox matInput [value]="(speechMessages|async)?.transcript" placeholder="Speech Input Result" disabled="true" cdkTextareaAutosize cdkAutosizeMinRows="2"
                      cdkAutosizeMaxRows="5"></textarea>
                    </mat-form-field>
                </form>
            </div>
            <div style="align-items: flex-end;">
                <ul style="margin-top: 0px;"><li *ngFor="let muser of userList">
                    <span>{{muser}}</span>
                    <button (click)="callUser(muser)"> Call</button>
                    <button (click)="watchUser(muser)"> Watch</button>
                    <button (click)="stopSample(muser)">Hang Up</button>
                    <button (click)="sendData(muser)">Private Message</button>
                </li></ul>
            </div>
        </div>
        <div *ngIf="peerList.size > 0" class="pb-2">
            <button class="btn btn-primary" (click)="capture()">Capture Image</button>
            <button [disabled]="isRecording" (click)="record()">Record</button>
            <button [disabled]="!isRecording" (click)="stop()">Stop</button>
        </div>
        <div class="chat">
            Chat:<br/>
            <input #textBox [disabled]="false" id="textbox" type="text" name="text" placeholder="Say something meaningful..." autocomplete="off" (keyup)="handleKey($event)" cdkTextareaAutosize cdkAutosizeMinRows="2"
            cdkAutosizeMaxRows="5">
            <input #sendChat  [disabled]="chatBoxDisabled" type="button" id="send" name="send" value="Send" (click)="handleSendButton($event.target.previousElementSibling.value)">
          </div>
        <div style="height: auto;max-height: 400px; width: 800px;max-width: 800px;display: flex;flex-direction: column; margin-bottom: 200px;">
            <div style="flex-grow: 1; padding: 20px 30px; overflow: auto;">
                <div #privateChatBox class="privateChatBox" style="display: flex; flex-direction: column;align-items: flex-start;"></div>
                <div #publicChatBox class="publicChatBox" style="display: flex; flex-direction: column;align-items: flex-end;"></div>    
            </div>
        </div>
        <!-- <div class="p-1">
            <canvas #canvas class="vid"></canvas>
        </div> -->
        <!-- <button (click)="camOff()" >Stop</button> -->
    </div>
</div>
